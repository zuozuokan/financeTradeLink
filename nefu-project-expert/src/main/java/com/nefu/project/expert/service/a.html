<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MinIO 图片查看器</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
        }
        .container {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        h1 {
            color: #333;
        }
        .image-container {
            margin-top: 20px;
            padding: 10px;
            border: 1px dashed #ccc;
            min-height: 300px;
        }
        img {
            max-width: 100%;
            max-height: 500px;
            border-radius: 4px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        input[type="text"] {
            padding: 10px;
            width: 80%;
            max-width: 600px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin-left: 10px;
        }
        button:hover {
            background-color: #45a049;
        }
        .error {
            color: #f44336;
            margin-top: 10px;
            display: none;
        }
    </style>
</head>
<body>
<div class="container">
    <h1>MinIO 图片查看器</h1>

    <div class="image-container">
        <img id="imageDisplay" src="" alt="图片预览">
        <div id="errorMessage" class="error">无法加载图片，请检查URL是否正确</div>
    </div>

    <p>输入MinIO图片URL:</p>
    <div>
        <input type="text" id="imageUrl" value="http://124.221.141.62:9001/browser/expert-bucket/expert%2F1db7190a-4c64-406c-b52e-4418dfee51a9.jpg">
        <button id="loadButton">加载图片</button>
    </div>
</div>

<script>
    // 获取DOM元素
    const imageDisplay = document.getElementById('imageDisplay');
    const imageUrlInput = document.getElementById('imageUrl');
    const loadButton = document.getElementById('loadButton');
    const errorMessage = document.getElementById('errorMessage');

    // 加载图片函数
    function loadImage() {
        const url = imageUrlInput.value.trim();
        if (url) {
            // 重置错误信息
            errorMessage.style.display = 'none';

            // 显示加载中的提示（可以替换为加载动画）
            imageDisplay.src = '';
            imageDisplay.alt = '加载中...';

            // 设置图片源
            imageDisplay.src = url;

            // 监听图片加载错误
            imageDisplay.onload = function() {
                if (imageDisplay.naturalWidth === 0) {
                    handleImageError();
                } else {
                    imageDisplay.alt = '图片已加载';
                }
            };

            imageDisplay.onerror = handleImageError;
        }
    }

    // 处理图片加载错误
    function handleImageError() {
        imageDisplay.src = '';
        imageDisplay.alt = '图片加载失败';
        errorMessage.style.display = 'block';
    }

    // 绑定按钮点击事件
    loadButton.addEventListener('click', loadImage);

    // 允许按Enter键加载图片
    imageUrlInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            loadImage();
        }
    });

    // 页面加载时自动加载默认图片
    window.onload = loadImage;
</script>
</body>
</html>